<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>u-connectXpress host library: Functions that busy-waits for timeout or external event</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="ublox-logo.webp"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">u-connectXpress host library
   &#160;<span id="projectnumber">0.4</span>
   </div>
   <div id="projectbrief">AT and EDM parser for u-blox shortrange standalone modules</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('group__busywaits.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Functions that busy-waits for timeout or external event<div class="ingroups"><a class="el" href="group__misc.html">Miscellaneous functions</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>These functions are currently implemented to busy-wait for a defined time, or until a specific condition is met.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="memitem:ga16062973998dfffdbaa9b76822a5f38e"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__internal.html#ga16062973998dfffdbaa9b76822a5f38e">atEdmReadPacket</a> (int(*readMore)(uint8_t *, size_t), uint8_t *inData, size_t bufSize, <a class="el" href="structucxh_e_d_m__event__t.html">ucxhEDM_event_t</a> *eventData)</td></tr>
<tr class="separator:ga16062973998dfffdbaa9b76822a5f38e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga77d532f4b3b0676e305c33933129969a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__modulecontrol.html#ga77d532f4b3b0676e305c33933129969a">ucxhMODULE_factoryReset</a> (void)</td></tr>
<tr class="separator:ga77d532f4b3b0676e305c33933129969a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4c20db194aaf75608d19c6ddc2414837"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__busywaits.html#ga4c20db194aaf75608d19c6ddc2414837">ucxhAT_wait</a> (int32_t numSeconds)</td></tr>
<tr class="separator:ga4c20db194aaf75608d19c6ddc2414837"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gadc666e06b06e9051afe4edef00c1508f"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__busywaits.html#gadc666e06b06e9051afe4edef00c1508f">ucxhEDM_wait</a> (int32_t numSeconds)</td></tr>
<tr class="separator:gadc666e06b06e9051afe4edef00c1508f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaee2e48f6ea5776b51724acf62d4a8c8f"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__busywaits.html#gaee2e48f6ea5776b51724acf62d4a8c8f">ucxhPARSER_wait</a> (int32_t numSeconds)</td></tr>
<tr class="separator:gaee2e48f6ea5776b51724acf62d4a8c8f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga025194f59822ed4abaa304ca465ed7ef"><td class="memItemLeft" align="right" valign="top"><a class="el" href="ucxh__wait_8h.html#afcb5d1224d34e22b06435327f90b8030">ucxhAT_response_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__busywaits.html#ga025194f59822ed4abaa304ca465ed7ef">ucxhPARSER_waitForOk</a> (int32_t numSeconds)</td></tr>
<tr class="separator:ga025194f59822ed4abaa304ca465ed7ef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga389f5e513270fd58ff02100fe528c815"><td class="memItemLeft" align="right" valign="top"><a class="el" href="ucxh__wait_8h.html#afcb5d1224d34e22b06435327f90b8030">ucxhAT_response_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__busywaits.html#ga389f5e513270fd58ff02100fe528c815">ucxhAT_waitForOk</a> (int32_t numSeconds)</td></tr>
<tr class="separator:ga389f5e513270fd58ff02100fe528c815"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9de725c63c847b163b29e143ffe0424b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="ucxh__wait_8h.html#afcb5d1224d34e22b06435327f90b8030">ucxhAT_response_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__busywaits.html#ga9de725c63c847b163b29e143ffe0424b">ucxhEDM_waitForOk</a> (int32_t numSeconds)</td></tr>
<tr class="separator:ga9de725c63c847b163b29e143ffe0424b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>These functions are currently implemented to busy-wait for a defined time, or until a specific condition is met. </p>
<p>During waiting, the UART is checked for incoming data, AT or EDM packets are parsed, and the appropriate callback is invoked, depending on input. </p><dl class="section note"><dt>Note</dt><dd>These functions exist only to simplify the development of the examples and tests. </dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>These functions will hog the MCU, making them unsuitable for use in a super-loop. </dd></dl>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga16062973998dfffdbaa9b76822a5f38e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga16062973998dfffdbaa9b76822a5f38e">&#9670;&nbsp;</a></span>atEdmReadPacket()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int atEdmReadPacket </td>
          <td>(</td>
          <td class="paramtype">int(*)(uint8_t *, size_t)&#160;</td>
          <td class="paramname"><em>readMore</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>inData</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>bufSize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structucxh_e_d_m__event__t.html">ucxhEDM_event_t</a> *&#160;</td>
          <td class="paramname"><em>eventData</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Attempt to generate an <a class="el" href="structucxh_e_d_m__event__t.html">ucxhEDM_event_t</a> from an incoming packet If the inData buffer does not contain a complete packet, readMore() will be invoked.</p>
<dl class="section warning"><dt>Warning</dt><dd>This function busy-waits and may occupy the MCU for several seconds. </dd></dl>
<dl class="section user"><dt>Polled functions:</dt><dd>readMore()</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">readMore</td><td>callback invoked if the inData buffer does not contain a complete packet </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">inData</td><td>buffer containing an incoming (complete or partial) EDM packet to parse </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">bufSize</td><td>number of valid bytes in the inData buffer </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">eventData</td><td>The event to generate. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>number of bytes consumed in the inbuffer when an event has been generated, 0 is more data is required, &lt; 0 in case of error </dd></dl>

</div>
</div>
<a id="ga77d532f4b3b0676e305c33933129969a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga77d532f4b3b0676e305c33933129969a">&#9670;&nbsp;</a></span>ucxhMODULE_factoryReset()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ucxhMODULE_factoryReset </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Reverts the module to its factory default, and restarts it.</p>
<dl class="section warning"><dt>Warning</dt><dd>This function busy-waits and may occupy the MCU for several seconds. </dd></dl>
<dl class="section user"><dt>Polled functions:</dt><dd><a class="el" href="group__busywaits.html#ga025194f59822ed4abaa304ca465ed7ef">ucxhPARSER_waitForOk()</a> </dd></dl>

</div>
</div>
<a id="ga4c20db194aaf75608d19c6ddc2414837"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga4c20db194aaf75608d19c6ddc2414837">&#9670;&nbsp;</a></span>ucxhAT_wait()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool ucxhAT_wait </td>
          <td>(</td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>numSeconds</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Wait and handle data, URC or AT OK/ERROR responses in AT or DATA mode for a specific time. Callbacks will be invoked as required. Use <a class="el" href="group__busywaits.html#gaee2e48f6ea5776b51724acf62d4a8c8f">ucxhPARSER_wait()</a> instead.</p>
<dl class="section warning"><dt>Warning</dt><dd>This function busy-waits and may occupy the MCU for several seconds. </dd></dl>
<dl class="section user"><dt>Polled functions:</dt><dd><a class="el" href="group__receiving.html#ga0871920cfffb0663ef6714cdf61a066a">ucxhAT_poll()</a> </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">numSeconds</td><td>number of seconds to wait. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if something was received during waiting. </dd></dl>

</div>
</div>
<a id="gadc666e06b06e9051afe4edef00c1508f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gadc666e06b06e9051afe4edef00c1508f">&#9670;&nbsp;</a></span>ucxhEDM_wait()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool ucxhEDM_wait </td>
          <td>(</td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>numSeconds</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Wait and handle data, URC or AT OK/ERROR responses in Extended Data Mode (EDM) for a specific time. Callbacks will be invoked as required. Use <a class="el" href="group__busywaits.html#gaee2e48f6ea5776b51724acf62d4a8c8f">ucxhPARSER_wait()</a> instead.</p>
<dl class="section warning"><dt>Warning</dt><dd>This function busy-waits and may occupy the MCU for several seconds. </dd></dl>
<dl class="section user"><dt>Polled functions:</dt><dd><a class="el" href="group__receiving.html#ga6b467b7c72f3d150c2c8b07c37bd88e2">ucxhEDM_poll()</a> </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">numSeconds</td><td>number of seconds to wait. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if something was received during waiting. </dd></dl>

</div>
</div>
<a id="gaee2e48f6ea5776b51724acf62d4a8c8f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaee2e48f6ea5776b51724acf62d4a8c8f">&#9670;&nbsp;</a></span>ucxhPARSER_wait()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool ucxhPARSER_wait </td>
          <td>(</td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>numSeconds</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Wait and handle data, URC or AT OK/ERROR responses for a specific time. Callbacks will be invoked as required. This is the preferred function to wait for data, URC and AT OK/ERROR responses.</p>
<dl class="section warning"><dt>Warning</dt><dd>This function busy-waits and may occupy the MCU for several seconds. </dd></dl>
<dl class="section user"><dt>Polled functions:</dt><dd><a class="el" href="group__receiving.html#ga7d2d7e890d63d6c97274d5e71c0d3fb3">ucxhPARSER_poll()</a> </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">numSeconds</td><td>number of seconds to wait. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if something was received during waiting. </dd></dl>

</div>
</div>
<a id="ga025194f59822ed4abaa304ca465ed7ef"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga025194f59822ed4abaa304ca465ed7ef">&#9670;&nbsp;</a></span>ucxhPARSER_waitForOk()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ucxh__wait_8h.html#afcb5d1224d34e22b06435327f90b8030">ucxhAT_response_t</a> ucxhPARSER_waitForOk </td>
          <td>(</td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>numSeconds</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Wait for OK up to a timeout. Callbacks will be invoked as required. This is the preferred function to wait for OK. This function aborts once OK has been received. If OK is not detected within the desired timeout, this function returns false.</p>
<dl class="section warning"><dt>Warning</dt><dd>This function busy-waits and may occupy the MCU for several seconds. </dd></dl>
<dl class="section user"><dt>Polled functions:</dt><dd><a class="el" href="group__receiving.html#ga7d2d7e890d63d6c97274d5e71c0d3fb3">ucxhPARSER_poll()</a> </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">numSeconds</td><td>number of seconds to wait. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if something was received during waiting. </dd></dl>

</div>
</div>
<a id="ga389f5e513270fd58ff02100fe528c815"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga389f5e513270fd58ff02100fe528c815">&#9670;&nbsp;</a></span>ucxhAT_waitForOk()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ucxh__wait_8h.html#afcb5d1224d34e22b06435327f90b8030">ucxhAT_response_t</a> ucxhAT_waitForOk </td>
          <td>(</td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>numSeconds</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ga9de725c63c847b163b29e143ffe0424b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga9de725c63c847b163b29e143ffe0424b">&#9670;&nbsp;</a></span>ucxhEDM_waitForOk()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ucxh__wait_8h.html#afcb5d1224d34e22b06435327f90b8030">ucxhAT_response_t</a> ucxhEDM_waitForOk </td>
          <td>(</td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>numSeconds</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.17 </li>
  </ul>
</div>
</body>
</html>
